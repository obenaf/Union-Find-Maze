<!DOCTYPE html>
<html>

<head>
   <meta charset="UTF-8">

   <style>
      .grid {
         margin: 1em auto;
         border-collapse: collapse
      }

      .grid td {
         cursor: pointer;
         width: 30px;
         height: 30px;
      }

      .grid td.start {
         background-color: blue !important;
      }

      .grid td.end {
         background-color: red !important;
      }
   </style>

   <script>
      function Create2DArray(rows) {
         var arr = [];

         for (var i = 0; i < rows; i++) {
            arr[i] = [];
         }

         return arr;
      }


      var colorArray = [];
      var classArray = Create2DArray(17);

      window.onload = function() {
         var grid = clickableGrid(16, 16, function(el, row, col, y) {
            if (col == 0) {
               if (classArray[row][col + 1] == 0 || classArray[row + 1][col] == 0 || classArray[row - 1][col] == 0) {
                  classArray[row][col] = 0;
                  el.className = "start";
               }
            } else if (row == 0) {
               if (classArray[row + 1][col] == 0 || classArray[row][col + 1] == 0 || classArray[row][col - 1] == 0) {
                  classArray[row][col] = 0;
                  el.className = "start";
               }
            } else {
               if (classArray[row][col + 1] == 0 || classArray[row + 1][col] == 0 || classArray[row][col - 1] == 0 || classArray[row - 1][col] == 0) {
                  if (row == 15 && col == 15) {
                     alert("Final cell is in same group as start cell!")
                  }
                  classArray[row][col] = 0;
                  el.className = "start";
               }
            }
         });

         document.body.appendChild(grid);


         function clickableGrid(rows, cols, callback) {
            for (var x = 1; x < 256; x++) {
               colorArray.push('#' + Math.floor(Math.random() * 16777215).toString(16));
            }
            var classNum = 1;
            var i = 1;
            var grid = document.createElement('table');
            grid.className = 'grid';
            for (var r = 0; r < rows; ++r) {
               var tr = grid.appendChild(document.createElement('tr'));
               for (var c = 0; c < cols; ++c) {
                  var cell = tr.appendChild(document.createElement('td'));

                  if (r == 0 && c == 0) {
                     cell.className = "start";
                     classArray[r][c] = 0;
                  } else if (r == 15 && c == 15) {
                     cell.className = "end";
                  } else {
                     if (typeof classArray[r][c] == 'undefined') {
                        classNum += 1;
                        classArray[r][c] = classNum;
                     }
                     cell.style.backgroundColor = colorArray[classArray[r][c]];
                  }

                  cell.addEventListener('click', (function(el, r, c, i) {
                     return function() {
                        callback(el, r, c, i);
                     }
                  })(cell, r, c, i), false);
               }
            }
            return grid;
         }

      }
   </script>

</head>
<button id="refreshBtn" onclick="location.reload()">Refresh</button>

</html>
